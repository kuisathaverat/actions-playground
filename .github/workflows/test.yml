name: test

on:
  pull_request:
    branches: 
      - main
  workflow_dispatch:
  
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - site: "production"
            datacenter: "site-a"
            push: false
          - site: "staging"
            datacenter: "site-b"
          - site: "dev"
            datacenter: "site-c"
            push: true
    steps:
      - run: echo "${{ matrix.push }}"
      - if: ${{ matrix.push != false' }}
        run: exit 1
